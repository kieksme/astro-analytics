# Astro Analytics тАФ VS Code ржПржХрзНрж╕ржЯрзЗржирж╢ржи [![Version](https://img.shields.io/visual-studio-marketplace/v/kieksme.astro-analytics)](https://marketplace.visualstudio.com/items?itemName=kieksme.astro-analytics)

**ржнрж╛рж╖рж╛:** [English](README.md) | [Deutsch](README.de.md) | [Fran├зais](README.fr.md) | [Espa├▒ol](README.es.md) | [Italiano](README.it.md) | [Portugu├кs](README.pt.md) | [Nederlands](README.nl.md) | [Polski](README.pl.md) | [╨а╤Г╤Б╤Б╨║╨╕╨╣](README.ru.md) | [чоАф╜Уф╕нцЦЗ](README.zh-cn.md) | [цЧецЬмшкЮ](README.ja.md) | [рд╣рд┐рдиреНрджреА](README.hi.md) | [эХЬъ╡ньЦ┤](README.ko.md) | [Indonesia](README.id.md) | [Tiс║┐ng Viс╗Зt](README.vi.md) | [р╣Др╕Чр╕в](README.th.md) | [ржмрж╛ржВрж▓рж╛](README.bn.md)

> ЁЯзСтАНЁЯЪА Astro ржХрзА ржЬрж╛ржирзЗ ржирж╛? [astro.build](https://astro.build) ржжрзЗржЦрзБржиред

**ржкрзНрж░ржХрж╛рж╢ржХ:** kieks.me GbR

Astro Markdown ржмрж╛ `.astro` ржлрж╛ржЗрж▓ ржЦрзЛрж▓рж╛рж░ рж╕ржоржпрж╝ VS Code-ржП рж╕рж░рж╛рж╕рж░рж┐ Google Analytics GA4 ржорзЗржЯрзНрж░рж┐ржХ ржжрзЗржЦрж╛ржпрж╝ред

## ржмрзИрж╢рж┐рж╖рзНржЯрзНржп

- **CodeLens** тАФ ржкрзНрж░рждрж┐ржЯрж┐ `.md`/`.mdx`/`.astro` ржлрж╛ржЗрж▓рзЗрж░ рж╢рзАрж░рзНрж╖рзЗ ржмрж╛ржЙржирзНрж╕ рж░рзЗржЯ, ржнрж┐ржЙ, ржмрзНржпржмрж╣рж╛рж░ржХрж╛рж░рзА ржПржмржВ рж╕рзЗрж╢ржи рж╕ржоржпрж╝ржХрж╛рж▓
- **ржПржХрзНрж╕ржкрзНрж▓рзЛрж░рж╛рж░** тАФ ржЕрзНржпрж╛ржирж╛рж▓рж┐ржЯрж┐ржХрзНрж╕ ржбрзЗржЯрж╛ ржерж╛ржХрж▓рзЗ ржбрж┐рж░рзЗржХрзНржЯрж░рж┐ ржЯрзНрж░рж┐рждрзЗ ржлрж╛ржЗрж▓рзЗрж░ ржирж╛ржорзЗрж░ ржкрж╛рж╢рзЗ ржмрж╛ржЙржирзНрж╕ рж░рзЗржЯ (ржмрзНржпрж╛ржЬ + ржЯрзБрж▓ржЯрж┐ржк)
- **рж╣рзЛржнрж╛рж░ ржЯрзБрж▓ржЯрж┐ржк** тАФ рж╕ржорзНржкрзВрж░рзНржг ржорзЗржЯрзНрж░рж┐ржХ ржЯрзЗржмрж┐рж▓ (ржлрж╛ржЗрж▓рзЗрж░ ржкрзНрж░ржержо ржХржпрж╝рзЗржХ рж▓рж╛ржЗржирзЗ рж╣рзЛржнрж╛рж░ ржХрж░рзБржи)
- **рж╕рзНржЯрзНржпрж╛ржЯрж╛рж╕ ржмрж╛рж░** тАФ ржирж┐ржЪрзЗрж░ ржбрж╛ржиржжрж┐ржХрзЗ ржЦрзЛрж▓рж╛ ржкрзГрж╖рзНржарж╛рж░ ржмрж╛ржЙржирзНрж╕ рж░рзЗржЯ
- ржЕржЯрзЛ ржХрзНржпрж╛рж╢ (рзл ржорж┐ржирж┐ржЯ TTL), ржХрзНрж▓рж┐ржХрзЗ ржорзНржпрж╛ржирзБржпрж╝рж╛рж▓ рж░рж┐ржлрзНрж░рзЗрж╢

## ржмрж╛ржЙржирзНрж╕ рж░рзЗржЯ рж░ржЩ ржХрзЛржбрж┐ржВ

ржПржХрзНрж╕ржЯрзЗржирж╢ржи CodeLens, ржПржХрзНрж╕ржкрзНрж▓рзЛрж░рж╛рж░, рж╣рзЛржнрж╛рж░, рж╕рзНржЯрзНржпрж╛ржЯрж╛рж╕ ржмрж╛рж░ ржПржмржВ ржбрзНржпрж╛рж╢ржмрзЛрж░рзНржбрзЗ рж░ржЩрж┐ржи рж╕рзВржЪржХ (рж╕ржмрзБржЬ/рж╣рж▓рзБржж/ржХржорж▓рж╛/рж▓рж╛рж▓) ржжрж┐ржпрж╝рзЗ ржмрж╛ржЙржирзНрж╕ рж░рзЗржЯ ржжрзЗржЦрж╛ржпрж╝:

| рж╕рзНрждрж░ | ржмрж╛ржЙржирзНрж╕ рж░рзЗржЯ |
|------|------------|
| ЁЯЯв | < рзирзл% тАФ ржЦрзБржм ржнрж╛рж▓рзЛ |
| ЁЯЯб | рзирзлтАУрзкрзк% тАФ ржнрж╛рж▓рзЛ |
| ЁЯЯа | рзкрзлтАУрзмрзк% тАФ ржЧржбрж╝ |
| ЁЯФ┤ | тЙе рзмрзл% тАФ ржЙржирзНржирждрж┐ ржжрж░ржХрж╛рж░ |

## рж╕рзЗржЯржЖржк

### рзз. ржХрзНрж░рзЗржбрзЗржирж╢рж┐ржпрж╝рж╛рж▓ ржкрзНрж░рж╕рзНрждрзБржд ржХрж░рзБржи

ржПржХрзНрж╕ржЯрзЗржирж╢ржирзЗрж░ ржЬржирзНржп `analytics.readonly` рж╕рзНржХрзЛржк рж╕рж╣ Google Application Default Credentials ржжрж░ржХрж╛рж░ред

ржЖржЧрзЗ ржирж╛ ржерж╛ржХрж▓рзЗ ADC рждрзИрж░рж┐ ржХрж░рзБржиред ржнрж┐ржбрж┐ржУ ржжрзЗржЦрзБржи: [Authenticate with GCP using gcloud auth application-default login](https://www.youtube.com/watch?v=5utoA5gnKQ4)ред

```bash
gcloud auth application-default login \
  --scopes https://www.googleapis.com/auth/analytics.readonly,https://www.googleapis.com/auth/cloud-platform \
  --client-id-file=~/Certificates/gcp/internal-dev.json
```

рждрзИрж░рж┐ ржХрзНрж░рзЗржбрзЗржирж╢рж┐ржпрж╝рж╛рж▓ ржлрж╛ржЗрж▓рзЗрж░ ржкрж╛рже ржХржирж╕рзЛрж▓рзЗ ржжрзЗржЦрж╛ржмрзЗ:

```text
Credentials saved to file: [~/.config/gcloud/application_default_credentials.json]
```

### рзи. ржПржХрзНрж╕ржЯрзЗржирж╢ржи ржХржиржлрж┐ржЧрж╛рж░ ржХрж░рзБржи

VS Code-ржП: `Cmd+,` тЖТ **Astro Analytics** ржЦрзБржБржЬрзБржи

| рж╕рзЗржЯрж┐ржВ | ржмрж░рзНржгржирж╛ | ржбрж┐ржлрж▓рзНржЯ |
|--------|--------|--------|
| `astroAnalytics.propertyId` | GA4 ржкрзНрж░ржкрж╛рж░рзНржЯрж┐ ID (рж╕ржВржЦрзНржпрж╛) | `364493652` |
| `astroAnalytics.credentialsPath` | ржХрзНрж░рзЗржбрзЗржирж╢рж┐ржпрж╝рж╛рж▓ JSON-ржПрж░ ржкрж╛рже | (ADC ржбрж┐ржлрж▓рзНржЯ) |
| `astroAnalytics.lookbackDays` | ржжрж┐ржирзЗрж░ ржмрзНржпрж╛ржкрзНрждрж┐ | `30` |
| `astroAnalytics.contentRoot` | Astro ржХржирзНржЯрзЗржирзНржЯ ржлрзЛрж▓рзНржбрж╛рж░ | `src/content` |
| `astroAnalytics.pagesRoot` | Astro ржкрзЗржЬ ржлрзЛрж▓рзНржбрж╛рж░ | `src/pages` |

ржЙржжрж╛рж╣рж░ржг `settings.json`:

```json
{
  "astroAnalytics.propertyId": "364493652",
  "astroAnalytics.credentialsPath": "~/.config/gcloud/application_default_credentials.json",
  "astroAnalytics.lookbackDays": 90,
  "astroAnalytics.contentRoot": "src/content",
  "astroAnalytics.pagesRoot": "src/pages"
}
```

### рзй. URL рж╕рзНрж▓рзНржпрж╛ржЧ ржорзНржпрж╛ржкрж┐ржВ

ржПржХрзНрж╕ржЯрзЗржирж╢ржи ржлрж╛ржЗрж▓ ржкрж╛рже ржерзЗржХрзЗ GA4-ржПрж░ `pagePath` ржмрзЗрж░ ржХрж░рзЗ:

```text
src/content/blog/datenstrategie-ki.md  тЖТ  /blog/datenstrategie-ki/
src/content/karriere/index.md          тЖТ  /karriere/
src/pages/blog/my-post.astro           тЖТ  /blog/my-post/
src/pages/index.astro                  тЖТ  /
```

**ржбрж╛ржпрж╝ржирж╛ржорж┐ржХ рж░рзБржЯ** (`[slug].astro`, `[...slug].astro`, `[slug]/[id].astro`) рж╕рж╛ржкрзЛрж░рзНржЯрзЗржб:

- **ржбрзНржпрж╛рж╢ржмрзЛрж░рзНржб**-ржП рж╕рзНржЯрзНржпрж╛ржЯрж┐ржХ ржлрж╛ржЗрж▓ ржирж╛ ржерж╛ржХрж▓рзЗ `/blog/`-ржПрж░ ржорждрзЛ GA4 ржкрж╛рже ржбрж╛ржпрж╝ржирж╛ржорж┐ржХ рж░рзБржЯ ржлрж╛ржЗрж▓рзЗ (ржпрзЗржоржи `src/pages/[slug].astro`) рж░рж┐ржЬрж▓ржн рж╣рждрзЗ ржкрж╛рж░рзЗред
- **ржбрж╛ржпрж╝ржирж╛ржорж┐ржХ рж░рзБржЯ ржлрж╛ржЗрж▓ ржЦрзБрж▓рж▓рзЗ** ржПржХрзНрж╕ржЯрзЗржирж╢ржи рж╕рзЗржЗ рж░рзБржЯрзЗрж░ рж╕рж╛ржерзЗ ржорж┐рж▓рзЗ ржпрж╛ржУржпрж╝рж╛ рж╕ржм GA4 ржкрж╛ржерзЗрж░ ржЬржирзНржп **ржПржЧрзНрж░рж┐ржЧрзЗржЯ** ржмрж╛ржЙржирзНрж╕ рж░рзЗржЯ, ржнрж┐ржЙ, ржмрзНржпржмрж╣рж╛рж░ржХрж╛рж░рзА ржУ рж╕рзЗрж╢ржи рж╕ржоржпрж╝ ржжрзЗржЦрж╛ржпрж╝ред

### рзк. ржбрзЗржЯрж╛ рж▓рзЛржб рж╣ржЪрзНржЫрзЗ ржХрж┐ржирж╛ ржЪрзЗржХ ржХрж░рзБржи

ржорзЗржЯрзНрж░рж┐ржХ ржирж╛ ржжрзЗржЦрж▓рзЗ (CodeLens-ржП "no data" ржмрж╛ рж╕рзНржЯрзНржпрж╛ржЯрж╛рж╕ ржмрж╛рж░ ржЦрж╛рж▓рж┐):

рзз. **ржЯрзЗрж╕рзНржЯ ржХржорж╛ржирзНржб ржЪрж╛рж▓рж╛ржи** тАФ `Cmd+Shift+P` тЖТ **"Astro Analytics: Test API Connection"**ред **"Astro Analytics: Open Dashboard"** ржУ ржЪрж╛рж▓рж╛рждрзЗ ржкрж╛рж░рзЗржиред
рзи. **ржХржиржлрж┐ржЧ ржЪрзЗржХ ржХрж░рзБржи** тАФ ржирж┐рж╢рзНржЪрж┐ржд ржХрж░рзБржи `astroAnalytics.propertyId` рж╕рзЗржЯ ржЖржЫрзЗ ржПржмржВ ржкрзНрж░ржпрж╝рзЛржЬржирзЗ `astroAnalytics.credentialsPath` ржЖржкржирж╛рж░ ржХрзНрж░рзЗржбрзЗржирж╢рж┐ржпрж╝рж╛рж▓ JSON-ржПрж░ ржжрж┐ржХрзЗред
рзй. **рж╕рзНрж▓рзНржпрж╛ржЧ ржорзНржпрж╛ржЪрж┐ржВ ржЪрзЗржХ ржХрж░рзБржи** тАФ GA4-ржПрж░ `pagePath` ржПржмржВ ржПржХрзНрж╕ржЯрзЗржирж╢ржирзЗрж░ рж╕рзНрж▓рзНржпрж╛ржЧ ржжрзБржЯрзЛржЗ ржЯрзНрж░рзЗржЗрж▓рж┐ржВ рж╕рзНрж▓рзНржпрж╛рж╢ (ржпрзЗржоржи `/blog/my-post/`) ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗред ржПржХрзНрж╕ржЯрзЗржирж╢ржи ржкрзНрж░ржпрж╝рзЛржЬржи рж╣рж▓рзЗ рж▓рзБржХржЖржкрзЗрж░ ржЬржирзНржп ржкрж╛рже ржирж░ржорж╛рж▓рж╛ржЗржЬ ржХрж░рзЗред
рзк. **Output ржЪрзНржпрж╛ржирзЗрж▓ ржжрзЗржЦрзБржи** тАФ API ржПрж░рж░ рж╕рзЗржЦрж╛ржирзЗ ржПржмржВ ржирзЛржЯрж┐ржлрж┐ржХрзЗрж╢ржирзЗ ржЖрж╕рзЗред

**"Astro Analytics: Test API Connection" ржХржорж╛ржирзНржб ржирж╛ ржкрзЗрж▓рзЗ:** ржПржХрзНрж╕ржЯрзЗржирж╢ржи рж░рж┐ржмрж┐рж▓рзНржб ржХрж░рзБржи ржПржмржВ ржЙржЗржирзНржбрзЛ рж░рж┐рж▓рзЛржб ржХрж░рзБржиред [CONTRIBUTING.md](CONTRIBUTING.md) ржжрзЗржЦрзБржиред

## рж▓рзЛржХрж╛рж▓рж╛ржЗржЬрзЗрж╢ржи

ржПржХрзНрж╕ржЯрзЗржирж╢ржи ржирж┐ржЪрзЗрж░ ржнрж╛рж╖рж╛ржЧрзБрж▓рзЛрж░ ржЬржирзНржп рж▓рзЛржХрж╛рж▓рж╛ржЗржЬржбред ржЕржирзБржмрж╛ржж ржерж╛ржХрж▓рзЗ UI VS Code-ржПрж░ ржбрж┐рж╕ржкрзНрж▓рзЗ ржнрж╛рж╖рж╛ ржЕржирзБрж╕рж░ржг ржХрж░рзЗ:

| ржнрж╛рж╖рж╛ | Locale |
|------|--------|
| English | `en` |
| Deutsch | `de` |
| Fran├зais | `fr` |
| Espa├▒ol | `es` |
| Italiano | `it` |
| Portugu├кs | `pt` |
| Nederlands | `nl` |
| Polski | `pl` |
| ╨а╤Г╤Б╤Б╨║╨╕╨╣ | `ru` |
| чоАф╜Уф╕нцЦЗ | `zh-cn` |
| цЧецЬмшкЮ | `ja` |
| рд╣рд┐рдиреНрджреА | `hi` |
| эХЬъ╡ньЦ┤ | `ko` |
| Indonesia | `id` |
| Tiс║┐ng Viс╗Зt | `vi` |
| р╣Др╕Чр╕в | `th` |
| ржмрж╛ржВрж▓рж╛ | `bn` |

ржЕржирзБржмрж╛ржж `package.nls.*.json` (UI) ржПржмржВ `l10n/bundle.l10n.*.json` (ржорзЗрж╕рзЗржЬ ржУ ржбрзНржпрж╛рж╢ржмрзЛрж░рзНржб)-ржП ржЖржЫрзЗред

## ржЗржирзНрж╕ржЯрж▓

[VS Code Marketplace](https://marketplace.visualstudio.com/items?itemName=kieksme.astro-analytics) ржерзЗржХрзЗ ржЕржержмрж╛ `.vsix` ржлрж╛ржЗрж▓ ржерзЗржХрзЗ ржЗржирзНрж╕ржЯрж▓ ржХрж░рзБржи (`Cmd+Shift+P` тЖТ **"Install from VSIX..."**)ред рж╕рзЛрж░рзНрж╕ ржерзЗржХрзЗ ржмрж┐рж▓рзНржб ржХрж░рждрзЗ [CONTRIBUTING.md](CONTRIBUTING.md) ржжрзЗржЦрзБржиред
