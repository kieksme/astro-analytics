# Astro Analytics тАФ VS Code рдПрдХреНрд╕рдЯреЗрдВрд╢рди [![Version](https://img.shields.io/visual-studio-marketplace/v/kieksme.astro-analytics)](https://marketplace.visualstudio.com/items?itemName=kieksme.astro-analytics)

**рднрд╛рд╖рд╛рдПрдБ:** [English](README.md) | [Deutsch](README.de.md) | [Fran├зais](README.fr.md) | [Espa├▒ol](README.es.md) | [Italiano](README.it.md) | [Portugu├кs](README.pt.md) | [Nederlands](README.nl.md) | [Polski](README.pl.md) | [╨а╤Г╤Б╤Б╨║╨╕╨╣](README.ru.md) | [чоАф╜Уф╕нцЦЗ](README.zh-cn.md) | [цЧецЬмшкЮ](README.ja.md) | [рд╣рд┐рдиреНрджреА](README.hi.md) | [эХЬъ╡ньЦ┤](README.ko.md) | [Indonesia](README.id.md) | [Tiс║┐ng Viс╗Зt](README.vi.md) | [р╣Др╕Чр╕в](README.th.md) | [ржмрж╛ржВрж▓рж╛](README.bn.md)

> ЁЯзСтАНЁЯЪА Astro рдирд╣реАрдВ рдЬрд╛рдирддреЗ? [astro.build](https://astro.build) рджреЗрдЦреЗрдВред

**рдкреНрд░рдХрд╛рд╢рдХ:** kieks.me GbR

Astro Markdown рдпрд╛ `.astro` рдлрд╝рд╛рдЗрд▓реЗрдВ рдЦреЛрд▓рдиреЗ рдкрд░ VS Code рдореЗрдВ рд╕реАрдзреЗ Google Analytics GA4 рдореЗрдЯреНрд░рд┐рдХреНрд╕ рджрд┐рдЦрд╛рддрд╛ рд╣реИред

## рд╕реБрд╡рд┐рдзрд╛рдПрдБ

- **CodeLens** тАФ рд╣рд░ `.md`/`.mdx`/`.astro` рдлрд╝рд╛рдЗрд▓ рдХреЗ рдКрдкрд░ Bounce Rate, Views, Users рдФрд░ Session Duration
- **рдПрдХреНрд╕рдкреНрд▓реЛрд░рд░** тАФ рдЬрдм рдПрдирд╛рд▓рд┐рдЯрд┐рдХреНрд╕ рдбреЗрдЯрд╛ рд╣реЛ рддреЛ рдбрд╛рдпрд░реЗрдХреНрдЯрд░реА рдЯреНрд░реА рдореЗрдВ рдлрд╝рд╛рдЗрд▓ рдирд╛рдореЛрдВ рдХреЗ рдмрдЧрд▓ рдореЗрдВ Bounce Rate (рдмреИрдЬ + рдЯреВрд▓рдЯрд┐рдк)
- **рд╣реЛрд╡рд░ рдЯреВрд▓рдЯрд┐рдк** тАФ рдкреВрд░реА рдореЗрдЯреНрд░рд┐рдХреНрд╕ рдЯреЗрдмрд▓ (рдлрд╝рд╛рдЗрд▓ рдХреА рдкрд╣рд▓реА рдкрдВрдХреНрддрд┐рдпреЛрдВ рдкрд░ рд╣реЛрд╡рд░ рдХрд░реЗрдВ)
- **рд╕реНрдЯреЗрдЯрд╕ рдмрд╛рд░** тАФ рдиреАрдЪреЗ рджрд╛рдПрдБ рдореЗрдВ рдЦреБрд▓реА рдкреЗрдЬ рдХреА Bounce Rate
- рдСрдЯреЛ рдХреИрд╢ (5 рдорд┐рдирдЯ TTL), рдХреНрд▓рд┐рдХ рдкрд░ рдореИрдиреБрдЕрд▓ рд░рд┐рдлреНрд░реЗрд╢

## Bounce Rate рд░рдВрдЧ рдХреЛрдбрд┐рдВрдЧ

рдПрдХреНрд╕рдЯреЗрдВрд╢рди CodeLens, рдПрдХреНрд╕рдкреНрд▓реЛрд░рд░, рд╣реЛрд╡рд░, рд╕реНрдЯреЗрдЯрд╕ рдмрд╛рд░ рдФрд░ рдбреИрд╢рдмреЛрд░реНрдб рдореЗрдВ рд░рдВрдЧреЛрдВ (рд╣рд░рд╛ / рдкреАрд▓рд╛ / рдирд╛рд░рдВрдЧреА / рд▓рд╛рд▓) рд╕реЗ Bounce Rate рджрд┐рдЦрд╛рддрд╛ рд╣реИ:

| рд╕реНрддрд░ | Bounce Rate |
|------|-------------|
| ЁЯЯв | < 25% тАФ рдмрд╣реБрдд рдЕрдЪреНрдЫрд╛ |
| ЁЯЯб | 25тАУ44% тАФ рдЕрдЪреНрдЫрд╛ |
| ЁЯЯа | 45тАУ64% тАФ рдФрд╕рдд |
| ЁЯФ┤ | тЙе 65% тАФ рд╕реБрдзрд╛рд░ рдЪрд╛рд╣рд┐рдП |

## рд╕реЗрдЯрдЕрдк

### 1. рдХреНрд░реЗрдбреЗрдВрд╢рд┐рдпрд▓ рддреИрдпрд╛рд░ рдХрд░реЗрдВ

рдПрдХреНрд╕рдЯреЗрдВрд╢рди рдХреЛ `analytics.readonly` рд╕реНрдХреЛрдк рд╡рд╛рд▓реЗ Google Application Default Credentials рдЪрд╛рд╣рд┐рдПред

рдЕрдЧрд░ рдЕрднреА рдирд╣реАрдВ рд╣реИрдВ рддреЛ ADC рдмрдирд╛рдПрдБред рд╡реАрдбрд┐рдпреЛ рдХреЗ рд▓рд┐рдП рджреЗрдЦреЗрдВ: [Authenticate with GCP using gcloud auth application-default login](https://www.youtube.com/watch?v=5utoA5gnKQ4).

```bash
gcloud auth application-default login \
  --scopes https://www.googleapis.com/auth/analytics.readonly,https://www.googleapis.com/auth/cloud-platform \
  --client-id-file=~/Certificates/gcp/internal-dev.json
```

рдмрдирд╛рдИ рдЧрдИ рдХреНрд░реЗрдбреЗрдВрд╢рд┐рдпрд▓ рдлрд╝рд╛рдЗрд▓ рдХрд╛ рдкрде рдХрдВрд╕реЛрд▓ рдореЗрдВ рджрд┐рдЦрддрд╛ рд╣реИ:

```text
Credentials saved to file: [~/.config/gcloud/application_default_credentials.json]
```

### 2. рдПрдХреНрд╕рдЯреЗрдВрд╢рди рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдХрд░реЗрдВ

VS Code рдореЗрдВ: `Cmd+,` тЖТ **Astro Analytics** рдЦреЛрдЬреЗрдВ

| рд╕реЗрдЯрд┐рдВрдЧ | рд╡рд┐рд╡рд░рдг | рдбрд┐рдлрд╝реЙрд▓реНрдЯ |
|--------|--------|----------|
| `astroAnalytics.propertyId` | GA4 рдкреНрд░реЙрдкрд░реНрдЯреА ID (рд╕рдВрдЦреНрдпрд╛рддреНрдордХ) | `364493652` |
| `astroAnalytics.credentialsPath` | рдХреНрд░реЗрдбреЗрдВрд╢рд┐рдпрд▓ JSON рдХрд╛ рдкрде | (ADC рдбрд┐рдлрд╝реЙрд▓реНрдЯ) |
| `astroAnalytics.lookbackDays` | рджрд┐рдиреЛрдВ рдХреА рдЕрд╡рдзрд┐ | `30` |
| `astroAnalytics.contentRoot` | Astro рдХрдВрдЯреЗрдВрдЯ рдлрд╝реЛрд▓реНрдбрд░ | `src/content` |
| `astroAnalytics.pagesRoot` | Astro рдкреЗрдЬ рдлрд╝реЛрд▓реНрдбрд░ | `src/pages` |

рдЙрджрд╛рд╣рд░рдг `settings.json`:

```json
{
  "astroAnalytics.propertyId": "364493652",
  "astroAnalytics.credentialsPath": "~/.config/gcloud/application_default_credentials.json",
  "astroAnalytics.lookbackDays": 90,
  "astroAnalytics.contentRoot": "src/content",
  "astroAnalytics.pagesRoot": "src/pages"
}
```

### 3. URL рд╕реНрд▓рдЧ рдореИрдкрд┐рдВрдЧ

рдПрдХреНрд╕рдЯреЗрдВрд╢рди рдлрд╝рд╛рдЗрд▓ рдкрде рд╕реЗ GA4 рдХрд╛ `pagePath` рдирд┐рдХрд╛рд▓рддрд╛ рд╣реИ:

```text
src/content/blog/datenstrategie-ki.md  тЖТ  /blog/datenstrategie-ki/
src/content/karriere/index.md          тЖТ  /karriere/
src/pages/blog/my-post.astro           тЖТ  /blog/my-post/
src/pages/index.astro                  тЖТ  /
```

**рдбрд╛рдпрдирд╛рдорд┐рдХ рд░реВрдЯ** (`[slug].astro`, `[...slug].astro`, `[slug]/[id].astro`) рд╕рдкреЛрд░реНрдЯреЗрдб рд╣реИрдВ:

- **рдбреИрд╢рдмреЛрд░реНрдб** рдореЗрдВ GA4 рдкрде рдЬреИрд╕реЗ `/blog/` рд╕реНрдЯреИрдЯрд┐рдХ рдлрд╝рд╛рдЗрд▓ рди рд╣реЛрдиреЗ рдкрд░ рдбрд╛рдпрдирд╛рдорд┐рдХ рд░реВрдЯ рдлрд╝рд╛рдЗрд▓ (рдЬреИрд╕реЗ `src/pages/[slug].astro`) рдкрд░ рд░рд┐рдЬрд╝реЙрд▓реНрд╡ рд╣реЛ рд╕рдХрддрд╛ рд╣реИред
- **рдбрд╛рдпрдирд╛рдорд┐рдХ рд░реВрдЯ рдлрд╝рд╛рдЗрд▓ рдЦреЛрд▓рдиреЗ** рдкрд░ рдПрдХреНрд╕рдЯреЗрдВрд╢рди рдЙрд╕ рд░реВрдЯ рд╕реЗ рдореИрдЪ рдХрд░рдиреЗ рд╡рд╛рд▓реЗ рд╕рднреА GA4 рдкрдереЛрдВ рдХреЗ рд▓рд┐рдП **рдПрдЧреНрд░реАрдЧреЗрдЯреЗрдб** Bounce Rate, Views, Users рдФрд░ Session Duration рджрд┐рдЦрд╛рддрд╛ рд╣реИред

### 4. рдбреЗрдЯрд╛ рд▓реЛрдб рд╣реЛрдиреЗ рдХреА рдЬрд╛рдБрдЪ

рдЕрдЧрд░ рдореЗрдЯреНрд░рд┐рдХреНрд╕ рдирд╣реАрдВ рджрд┐рдЦ рд░рд╣реЗ (CodeLens рдореЗрдВ "no data" рдпрд╛ рд╕реНрдЯреЗрдЯрд╕ рдмрд╛рд░ рдЦрд╛рд▓реА):

1. **рдЯреЗрд╕реНрдЯ рдХрдорд╛рдВрдб рдЪрд▓рд╛рдПрдБ** тАФ `Cmd+Shift+P` тЖТ **"Astro Analytics: Test API Connection"**ред **"Astro Analytics: Open Dashboard"** рднреА рдЪрд▓рд╛ рд╕рдХрддреЗ рд╣реИрдВред
2. **рдХреЙрдиреНрдлрд╝рд┐рдЧ рдЪреЗрдХ рдХрд░реЗрдВ** тАФ рд╕реБрдирд┐рд╢реНрдЪрд┐рдд рдХрд░реЗрдВ рдХрд┐ `astroAnalytics.propertyId` рд╕реЗрдЯ рд╣реИ рдФрд░ рдЬрд╝рд░реВрд░рдд рд╣реЛ рддреЛ `astroAnalytics.credentialsPath` рдЖрдкрдХреА рдХреНрд░реЗрдбреЗрдВрд╢рд┐рдпрд▓ JSON рдХреА рдУрд░ рдЗрд╢рд╛рд░рд╛ рдХрд░рддрд╛ рд╣реИред
3. **рд╕реНрд▓рдЧ рдореИрдЪрд┐рдВрдЧ рдЪреЗрдХ рдХрд░реЗрдВ** тАФ GA4 рдХрд╛ `pagePath` рдФрд░ рдПрдХреНрд╕рдЯреЗрдВрд╢рди рдХрд╛ рд╕реНрд▓рдЧ рджреЛрдиреЛрдВ рдЯреНрд░реЗрд▓рд┐рдВрдЧ рд╕реНрд▓реИрд╢ (рдЬреИрд╕реЗ `/blog/my-post/`) рдЗрд╕реНрддреЗрдорд╛рд▓ рдХрд░рддреЗ рд╣реИрдВред рдПрдХреНрд╕рдЯреЗрдВрд╢рди рдЬрд╝рд░реВрд░рдд рд╣реЛ рддреЛ рд▓реБрдХрдЕрдк рдХреЗ рд▓рд┐рдП рдкрде рдиреЙрд░реНрдорд▓рд╛рдЗрдЬрд╝ рдХрд░рддрд╛ рд╣реИред
4. **Output рдЪреИрдирд▓ рджреЗрдЦреЗрдВ** тАФ API рдПрд░рд░ рд╡рд╣рд╛рдБ рдФрд░ рдиреЛрдЯрд┐рдлрд┐рдХреЗрд╢рди рдореЗрдВ рджрд┐рдЦрддреЗ рд╣реИрдВред

**рдЕрдЧрд░ рдХрдорд╛рдВрдб "Astro Analytics: Test API Connection" рдирд╣реАрдВ рдорд┐рд▓рддрд╛:** рдПрдХреНрд╕рдЯреЗрдВрд╢рди рд░реАрдмрд┐рд▓реНрдб рдХрд░реЗрдВ рдФрд░ рд╡рд┐рдВрдбреЛ рд░реАрд▓реЛрдб рдХрд░реЗрдВред [CONTRIBUTING.md](CONTRIBUTING.md) рджреЗрдЦреЗрдВред

## рд▓реЛрдХрд▓рд╛рдЗрдЬрд╝реЗрд╢рди

рдПрдХреНрд╕рдЯреЗрдВрд╢рди рдиреАрдЪреЗ рджреА рдЧрдИ рднрд╛рд╖рд╛рдУрдВ рдХреЗ рд▓рд┐рдП рд▓реЛрдХрд▓рд╛рдЗрдЬрд╝ рд╣реИред рдЬрдм рдЕрдиреБрд╡рд╛рдж рдЙрдкрд▓рдмреНрдз рд╣реЛ рддреЛ UI VS Code рдХреА рдбрд┐рд╕реНрдкреНрд▓реЗ рднрд╛рд╖рд╛ рдлреЙрд▓реЛ рдХрд░рддрд╛ рд╣реИ:

| рднрд╛рд╖рд╛ | Locale |
|------|--------|
| English | `en` |
| Deutsch | `de` |
| Fran├зais | `fr` |
| Espa├▒ol | `es` |
| Italiano | `it` |
| Portugu├кs | `pt` |
| Nederlands | `nl` |
| Polski | `pl` |
| ╨а╤Г╤Б╤Б╨║╨╕╨╣ | `ru` |
| чоАф╜Уф╕нцЦЗ | `zh-cn` |
| цЧецЬмшкЮ | `ja` |
| рд╣рд┐рдиреНрджреА | `hi` |
| эХЬъ╡ньЦ┤ | `ko` |
| Indonesia | `id` |
| Tiс║┐ng Viс╗Зt | `vi` |
| р╣Др╕Чр╕в | `th` |
| ржмрж╛ржВрж▓рж╛ | `bn` |

рдЕрдиреБрд╡рд╛рдж `package.nls.*.json` (UI) рдФрд░ `l10n/bundle.l10n.*.json` (рдореИрд╕реЗрдЬ рдФрд░ рдбреИрд╢рдмреЛрд░реНрдб) рдореЗрдВ рд╣реИрдВред

## рдЗрдВрд╕реНрдЯреЙрд▓

[VS Code Marketplace](https://marketplace.visualstudio.com/items?itemName=kieksme.astro-analytics) рд╕реЗ рдпрд╛ `.vsix` рдлрд╝рд╛рдЗрд▓ рд╕реЗ рдЗрдВрд╕реНрдЯреЙрд▓ рдХрд░реЗрдВ (`Cmd+Shift+P` тЖТ **"Install from VSIX..."**)ред рд╕реЛрд░реНрд╕ рд╕реЗ рдмрд┐рд▓реНрдб рдХреЗ рд▓рд┐рдП [CONTRIBUTING.md](CONTRIBUTING.md) рджреЗрдЦреЗрдВред
